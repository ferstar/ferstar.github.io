<!doctype html><html lang=zh-CN><head prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#"><meta charset=utf-8><meta name=generator content="Hugo 0.118.2"><meta name=theme-color content="#fff"><meta name=color-scheme content="light dark"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=format-detection content="telephone=no, date=no, address=no, email=no"><meta http-equiv=cache-control content="no-transform"><meta http-equiv=cache-control content="no-siteapp"><title>Ubuntu优化 | STAY REAL</title><link rel=stylesheet href=/css/meme.min.28b7932bfdc9e80610bb0d7f8a070916d6488d841e9455389088f66435d88ee9.css><script src=/js/meme.min.417dc09b40f59a14dc853cde319769c2df79d1c89fe5f15c3e158ee0ddb9a0be.js></script>
<link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400;0,500;0,700;1,400;1,700&amp;family=Noto+Serif+SC:wght@400;500;700&amp;family=Source+Code+Pro:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" media=print onload='this.media="all"'><noscript><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400;0,500;0,700;1,400;1,700&amp;family=Noto+Serif+SC:wght@400;500;700&amp;family=Source+Code+Pro:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap"></noscript><meta name=author content="ferstar"><meta name=description content="1. 关闭错误报告 可以选择直接卸载apport这个软件包, 但最好还是改配置 1 2 # 看说明 sudo……"><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link rel=mask-icon href=/icons/safari-pinned-tab.svg color=#2a6df4><link rel=apple-touch-icon sizes=180x180 href=/icons/apple-touch-icon.png><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-title content="STAY REAL"><meta name=apple-mobile-web-app-status-bar-style content="black"><meta name=mobile-web-app-capable content="yes"><meta name=application-name content="STAY REAL"><meta name=msapplication-starturl content="../../"><meta name=msapplication-TileColor content="#fff"><meta name=msapplication-TileImage content="../../icons/mstile-150x150.png"><link rel=manifest href=/manifest.json><link rel=canonical href=https://blog.ferstar.org/post/issue-11/><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","datePublished":"2020-01-02T11:29:24+08:00","dateModified":"2023-09-02T04:54:37+00:00","url":"https://blog.ferstar.org/post/issue-11/","headline":"Ubuntu优化","description":"1. 关闭错误报告 可以选择直接卸载apport这个软件包, 但最好还是改配置 1 2 # 看说明 sudo……","inLanguage":"zh-CN","articleSection":"post","wordCount":2843,"image":["https://user-images.githubusercontent.com/2854276/71665297-49d18180-2d97-11ea-81d5-ce927479c346.png","https://user-images.githubusercontent.com/2854276/72120333-9f5aef00-3392-11ea-9e2e-131115439826.png","https://user-images.githubusercontent.com/2854276/72119789-92d59700-3390-11ea-80c3-b3af0b1f83f7.png"],"author":{"@type":"Person","description":"May the truth be without barriers","image":"https://blog.ferstar.org/icons/apple-touch-icon.png","url":"https://blog.ferstar.org/","name":"ferstar"},"license":"[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)","publisher":{"@type":"Organization","name":"STAY REAL","logo":{"@type":"ImageObject","url":"https://blog.ferstar.org/icons/apple-touch-icon.png"},"url":"https://blog.ferstar.org/"},"mainEntityOfPage":{"@type":"WebSite","@id":"https://blog.ferstar.org/"}}</script><meta property="og:title" content="Ubuntu优化"><meta property="og:description" content="1. 关闭错误报告 可以选择直接卸载apport这个软件包, 但最好还是改配置 1 2 # 看说明 sudo……"><meta property="og:url" content="https://blog.ferstar.org/post/issue-11/"><meta property="og:site_name" content="STAY REAL"><meta property="og:locale" content="zh"><meta property="og:image" content="https://user-images.githubusercontent.com/2854276/71665297-49d18180-2d97-11ea-81d5-ce927479c346.png"><meta property="og:type" content="article"><meta property="article:published_time" content="2020-01-02T11:29:24+08:00"><meta property="article:modified_time" content="2023-09-02T04:54:37+00:00"><meta property="article:section" content="post"><link rel=preconnect href=https://www.google-analytics.com crossorigin><script async src="https://www.googletagmanager.com/gtag/js?id=UA-7491858-2"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-7491858-2")</script></head><body><div class=container><a id=theme-switcher href=#><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon theme-icon-light"><path d="M193.2 104.5 242 7a18 18 0 0128 0l48.8 97.5L422.2 70A18 18 0 01442 89.8l-34.5 103.4L505 242a18 18 0 010 28l-97.5 48.8L442 422.2A18 18 0 01422.2 442l-103.4-34.5L270 505a18 18 0 01-28 0l-48.8-97.5L89.8 442A18 18 0 0170 422.2l34.5-103.4-97.5-48.8a18 18 0 010-28l97.5-48.8L70 89.8A18 18 0 0189.8 70zM256 128a128 128 0 10.01.0M256 160a96 96 0 10.01.0"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon theme-icon-dark"><path d="M27 412A256 256 0 10181 5a11.5 11.5.0 00-5 20A201.5 201.5.0 0142 399a11.5 11.5.0 00-15 13"/></svg></a><main class="main single" id=main><div class=main-inner><article class="content post h-entry" data-align=justify data-type=post><h1 class="post-title p-name">Ubuntu优化</h1><div class=post-meta><time datetime=2020-01-02T11:29:24+08:00 class="post-meta-item published dt-published"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon post-meta-icon"><path d="M148 288h-40c-6.6.0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6.0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm108-12v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm-96 96v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm-96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm192 0v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm96-260v352c0 26.5-21.5 48-48 48H48c-26.5.0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h48V12c0-6.6 5.4-12 12-12h40c6.6.0 12 5.4 12 12v52h128V12c0-6.6 5.4-12 12-12h40c6.6.0 12 5.4 12 12v52h48c26.5.0 48 21.5 48 48zm-48 346V160H48v298c0 3.3 2.7 6 6 6h340c3.3.0 6-2.7 6-6z"/></svg>&nbsp;2020.1.2</time>
<span class="post-meta-item category"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon post-meta-icon"><path d="M464 128H272l-54.63-54.63c-6-6-14.14-9.37-22.63-9.37H48C21.49 64 0 85.49.0 112v288c0 26.51 21.49 48 48 48h416c26.51.0 48-21.49 48-48V176c0-26.51-21.49-48-48-48zm0 272H48V112h140.12l54.63 54.63c6 6 14.14 9.37 22.63 9.37H464v224z"/></svg>&nbsp;<a href=/post/ class="category-link p-category">Post</a></span>
<span class="post-meta-item wordcount"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon post-meta-icon"><path d="M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3.0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9.0l60.1 60.1c18.8 18.7 18.8 49.1.0 67.9zM284.2 99.8 21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3.0-17l-111-111c-4.8-4.7-12.4-4.7-17.1.0zM124.1 339.9c-5.5-5.5-5.5-14.3.0-19.8l154-154c5.5-5.5 14.3-5.5 19.8.0s5.5 14.3.0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8.0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"/></svg>&nbsp;2843</span>
<span class="post-meta-item reading-time"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon post-meta-icon"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5.0-2e2-89.5-2e2-2e2S145.5 56 256 56s2e2 89.5 2e2 2e2-89.5 2e2-2e2 2e2zm61.8-104.4-84.9-61.7c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h32c6.6.0 12 5.4 12 12v141.7l66.8 48.6c5.4 3.9 6.5 11.4 2.6 16.8L334.6 349c-3.9 5.3-11.4 6.5-16.8 2.6z"/></svg>&nbsp;6&nbsp;分钟</span></div><div class="post-body e-content"><h2 id=1-关闭错误报告><a href=#1-关闭错误报告 class=anchor-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>1. 关闭错误报告</h2><blockquote><p>可以选择直接卸载<code>apport</code>这个软件包, 但最好还是改配置</p></blockquote><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1># 看说明</span>
</span></span><span class=line><span class=cl>sudo vi /etc/default/apport
</span></span></code></pre></td></tr></table></div></div></div><blockquote><p>贴个图</p></blockquote><p><img src=https://user-images.githubusercontent.com/2854276/71665297-49d18180-2d97-11ea-81d5-ce927479c346.png alt=DeepinScreenshot_select-area_20200102193713></p><h2 id=2关于根分区文件系统的选择><a href=#2关于根分区文件系统的选择 class=anchor-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>2.关于根分区文件系统的选择</h2><blockquote><p><code>ext4</code>老当益壮，选他没错</p></blockquote><blockquote><p><code>btrfs</code>真香, subvolume很赞!</p></blockquote><p>拿了个64GB的U盘（因为我想搞个Ubuntu2GO的东东）跑了下分：</p><p>跑分代码如下，哪抄的忘了，就是随机建大量小文件，然后再写&读，看耗时多少</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=ch>#!/usr/bin/python</span>
</span></span><span class=line><span class=cl><span class=c1># -*- coding: utf-8 -*-</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>filecount</span> <span class=o>=</span> <span class=mi>30000</span>
</span></span><span class=line><span class=cl><span class=n>filesize</span> <span class=o>=</span> <span class=mi>1024</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>random</span><span class=o>,</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>os</span> <span class=kn>import</span> <span class=n>system</span>
</span></span><span class=line><span class=cl><span class=n>flush</span> <span class=o>=</span> <span class=s2>&#34;sudo su -c &#39;sync ; echo 3 &gt; /proc/sys/vm/drop_caches&#39;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>randfile</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=s2>&#34;/dev/urandom&#34;</span><span class=p>,</span> <span class=s2>&#34;r&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span> <span class=s2>&#34;</span><span class=se>\n</span><span class=s2>create test folder:&#34;</span>
</span></span><span class=line><span class=cl><span class=n>starttime</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>system</span><span class=p>(</span><span class=s2>&#34;rm -rf test &amp;&amp; mkdir test&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>-</span> <span class=n>starttime</span>
</span></span><span class=line><span class=cl><span class=n>system</span><span class=p>(</span><span class=n>flush</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span> <span class=s2>&#34;</span><span class=se>\n</span><span class=s2>create files:&#34;</span>
</span></span><span class=line><span class=cl><span class=n>starttime</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=n>xrange</span><span class=p>(</span><span class=n>filecount</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>rand</span> <span class=o>=</span> <span class=n>randfile</span><span class=o>.</span><span class=n>read</span><span class=p>(</span><span class=nb>int</span><span class=p>(</span><span class=n>filesize</span> <span class=o>*</span> <span class=mf>0.5</span> <span class=o>+</span> <span class=n>filesize</span> <span class=o>*</span> <span class=n>random</span><span class=o>.</span><span class=n>random</span><span class=p>()))</span>
</span></span><span class=line><span class=cl>    <span class=n>outfile</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=s2>&#34;test/&#34;</span> <span class=o>+</span> <span class=n>unicode</span><span class=p>(</span><span class=n>i</span><span class=p>),</span> <span class=s2>&#34;w&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>outfile</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>rand</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>-</span> <span class=n>starttime</span>
</span></span><span class=line><span class=cl><span class=n>system</span><span class=p>(</span><span class=n>flush</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span> <span class=s2>&#34;</span><span class=se>\n</span><span class=s2>rewrite files:&#34;</span>
</span></span><span class=line><span class=cl><span class=n>starttime</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=n>xrange</span><span class=p>(</span><span class=nb>int</span><span class=p>(</span><span class=n>filecount</span> <span class=o>/</span> <span class=mi>10</span><span class=p>)):</span>
</span></span><span class=line><span class=cl>    <span class=n>rand</span> <span class=o>=</span> <span class=n>randfile</span><span class=o>.</span><span class=n>read</span><span class=p>(</span><span class=nb>int</span><span class=p>(</span><span class=n>filesize</span> <span class=o>*</span> <span class=mf>0.5</span> <span class=o>+</span> <span class=n>filesize</span> <span class=o>*</span> <span class=n>random</span><span class=o>.</span><span class=n>random</span><span class=p>()))</span>
</span></span><span class=line><span class=cl>    <span class=n>outfile</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=s2>&#34;test/&#34;</span> <span class=o>+</span> <span class=n>unicode</span><span class=p>(</span><span class=nb>int</span><span class=p>(</span><span class=n>random</span><span class=o>.</span><span class=n>random</span><span class=p>()</span> <span class=o>*</span> <span class=n>filecount</span><span class=p>)),</span> <span class=s2>&#34;w&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>outfile</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>rand</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>-</span> <span class=n>starttime</span>
</span></span><span class=line><span class=cl><span class=n>system</span><span class=p>(</span><span class=n>flush</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span> <span class=s2>&#34;</span><span class=se>\n</span><span class=s2>read linear:&#34;</span>
</span></span><span class=line><span class=cl><span class=n>starttime</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=n>xrange</span><span class=p>(</span><span class=nb>int</span><span class=p>(</span><span class=n>filecount</span> <span class=o>/</span> <span class=mi>10</span><span class=p>)):</span>
</span></span><span class=line><span class=cl>    <span class=n>infile</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=s2>&#34;test/&#34;</span> <span class=o>+</span> <span class=n>unicode</span><span class=p>(</span><span class=n>i</span><span class=p>),</span> <span class=s2>&#34;r&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>outfile</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>infile</span><span class=o>.</span><span class=n>read</span><span class=p>());</span>
</span></span><span class=line><span class=cl><span class=nb>print</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>-</span> <span class=n>starttime</span>
</span></span><span class=line><span class=cl><span class=n>system</span><span class=p>(</span><span class=n>flush</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span> <span class=s2>&#34;</span><span class=se>\n</span><span class=s2>read random:&#34;</span>
</span></span><span class=line><span class=cl><span class=n>starttime</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>outfile</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=s2>&#34;/dev/null&#34;</span><span class=p>,</span> <span class=s2>&#34;w&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=n>xrange</span><span class=p>(</span><span class=nb>int</span><span class=p>(</span><span class=n>filecount</span> <span class=o>/</span> <span class=mi>10</span><span class=p>)):</span>
</span></span><span class=line><span class=cl>    <span class=n>infile</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=s2>&#34;test/&#34;</span> <span class=o>+</span> <span class=n>unicode</span><span class=p>(</span><span class=nb>int</span><span class=p>(</span><span class=n>random</span><span class=o>.</span><span class=n>random</span><span class=p>()</span> <span class=o>*</span> <span class=n>filecount</span><span class=p>)),</span> <span class=s2>&#34;r&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>outfile</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>infile</span><span class=o>.</span><span class=n>read</span><span class=p>());</span>
</span></span><span class=line><span class=cl><span class=nb>print</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>-</span> <span class=n>starttime</span>
</span></span><span class=line><span class=cl><span class=n>system</span><span class=p>(</span><span class=n>flush</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span> <span class=s2>&#34;</span><span class=se>\n</span><span class=s2>delete all files:&#34;</span>
</span></span><span class=line><span class=cl><span class=n>starttime</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>system</span><span class=p>(</span><span class=s2>&#34;rm -rf test&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>-</span> <span class=n>starttime</span>
</span></span><span class=line><span class=cl><span class=n>system</span><span class=p>(</span><span class=n>flush</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div></div><p>U盘被我格成这样：</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1># sudo gdisk -l /dev/sda</span>
</span></span><span class=line><span class=cl>Disk /dev/sda: <span class=m>124822487</span> sectors, 59.5 GiB
</span></span><span class=line><span class=cl>Model: ROS2GO          
</span></span><span class=line><span class=cl>Sector size <span class=o>(</span>logical/physical<span class=o>)</span>: 512/512 bytes
</span></span><span class=line><span class=cl>Disk identifier <span class=o>(</span>GUID<span class=o>)</span>: B3D0C73A-433D-44C1-8F80-FA90167AAADC
</span></span><span class=line><span class=cl>Partition table holds up to <span class=m>128</span> entries
</span></span><span class=line><span class=cl>Main partition table begins at sector <span class=m>2</span> and ends at sector <span class=m>33</span>
</span></span><span class=line><span class=cl>First usable sector is 34, last usable sector is <span class=m>124822453</span>
</span></span><span class=line><span class=cl>Partitions will be aligned on 2048-sector boundaries
</span></span><span class=line><span class=cl>Total free space is <span class=m>1942420</span> sectors <span class=o>(</span>948.4 MiB<span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Number  Start <span class=o>(</span>sector<span class=o>)</span>    End <span class=o>(</span>sector<span class=o>)</span>  Size       Code  Name
</span></span><span class=line><span class=cl>   <span class=m>1</span>            <span class=m>2048</span>        <span class=m>20482047</span>   9.8 GiB     <span class=m>8300</span>  ext4
</span></span><span class=line><span class=cl>   <span class=m>2</span>        <span class=m>20482048</span>        <span class=m>40962047</span>   9.8 GiB     <span class=m>8300</span>  btrfs
</span></span><span class=line><span class=cl>   <span class=m>3</span>        <span class=m>40962048</span>        <span class=m>61442047</span>   9.8 GiB     <span class=m>8300</span>  f2fs
</span></span><span class=line><span class=cl>   <span class=m>4</span>        <span class=m>61442048</span>        <span class=m>81922047</span>   9.8 GiB     <span class=m>8300</span>  xfs
</span></span><span class=line><span class=cl>   <span class=m>5</span>        <span class=m>81922048</span>       <span class=m>102402047</span>   9.8 GiB     <span class=m>8300</span>  reiserfs
</span></span></code></pre></td></tr></table></div></div></div><p>各分区挂载参数均是Ubuntu系统默认参数</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>f2fs <span class=o>(</span>rw,nosuid,nodev,relatime,lazytime,background_gc<span class=o>=</span>on,discard,no_heap,user_xattr,inline_xattr,acl,inline_data,inline_dentry,flush_merge,extent_cache,mode<span class=o>=</span>adaptive,active_logs<span class=o>=</span>6,alloc_mode<span class=o>=</span>reuse,fsync_mode<span class=o>=</span>posix,uhelper<span class=o>=</span>udisks2<span class=o>)</span>
</span></span><span class=line><span class=cl>btrfs <span class=o>(</span>rw,nosuid,nodev,relatime,space_cache,subvolid<span class=o>=</span>5,subvol<span class=o>=</span>/,uhelper<span class=o>=</span>udisks2<span class=o>)</span>
</span></span><span class=line><span class=cl>ext4 <span class=o>(</span>rw,nosuid,nodev,relatime,uhelper<span class=o>=</span>udisks2<span class=o>)</span>
</span></span><span class=line><span class=cl>xfs <span class=o>(</span>rw,nosuid,nodev,relatime,attr2,inode64,logbufs<span class=o>=</span>8,logbsize<span class=o>=</span>32k,noquota,uhelper<span class=o>=</span>udisks2<span class=o>)</span>
</span></span><span class=line><span class=cl>reiserfs <span class=o>(</span>rw,nosuid,nodev,relatime,uhelper<span class=o>=</span>udisks2<span class=o>)</span>
</span></span></code></pre></td></tr></table></div></div></div><p>测试机系统：</p><p><img src=https://user-images.githubusercontent.com/2854276/72120333-9f5aef00-3392-11ea-9e2e-131115439826.png alt=DeepinScreenshot_select-area_20200110101815></p><p>内核版本：</p><p><code>Linux xiaoxinpro 5.3.0-24-generic #26-Ubuntu SMP Thu Nov 14 01:33:18 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux</code></p><p>跑分结果：</p><div class=table-container><table><thead><tr><th></th><th>create files</th><th>rewrite files</th><th>read linear</th><th>read random</th><th>delete all files</th></tr></thead><tbody><tr><td>ext4</td><td>0.593394041</td><td>3.646025896</td><td>0.960836887</td><td>2.286855936</td><td>0.646140814</td></tr><tr><td>btrfs</td><td>5.707916975</td><td>2.0158391</td><td>0.446825027</td><td>2.039553881</td><td>2.933115005</td></tr><tr><td>f2fs</td><td>0.737277031</td><td>2.216201067</td><td>0.841583014</td><td>2.216186047</td><td>17.70262408</td></tr><tr><td>xfs</td><td>0.781413078</td><td>5.908052206</td><td>1.212768078</td><td>3.198234081</td><td>4.744434118</td></tr><tr><td>reiserfs</td><td>1.735713959</td><td>1.866363049</td><td>0.23438096</td><td>1.559979916</td><td>2.575639963</td></tr></tbody></table></div><p><img src=https://user-images.githubusercontent.com/2854276/72119789-92d59700-3390-11ea-80c3-b3af0b1f83f7.png alt=bench></p><p>对于系统性能影响最大的应该是随机读写，这么看来还是<code>reiserfs</code>牛逼，几乎全面领先，可惜这货作者杀老婆，进局子了，但并不妨碍我用脚投票，<del>选<code>reiserfs</code>做根分区文件系统</del>，然并卵，Ubuntu用这货做根分区丢资料，放弃。剩下的，<code>ext4</code>还是老当益壮，<code>btrfs</code>也可以，<code>xfs</code>则并没有如网传那样犀利，<code>f2fs</code>删除文件居然那么慢。</p><h2 id=3-tlp---linux电源优化利器><a href=#3-tlp---linux电源优化利器 class=anchor-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>3. TLP - Linux电源优化利器</h2><blockquote><p>via: <a href=https://linrunner.de/en/tlp/docs/tlp-linux-advanced-power-management.html target=_blank rel=noopener>https://linrunner.de/en/tlp/docs/tlp-linux-advanced-power-management.html</a></p></blockquote><blockquote><p>有人说跟<code>powertop</code>搭配可能效果更好，然而我不觉得，这两货一起用卡的要死，所以只留一个就好</p></blockquote><blockquote><p>btrfs 文件系统的话, 需要改个东西</p></blockquote><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1># AHCI link power management (ALPM) for disk devices:</span>
</span></span><span class=line><span class=cl><span class=c1>#   min_power, med_power_with_dipm(*), medium_power, max_performance.</span>
</span></span><span class=line><span class=cl><span class=c1># (*) Kernel &gt;= 4.15 required, then recommended.</span>
</span></span><span class=line><span class=cl><span class=c1># Multiple values separated with spaces are tried sequentially until success.</span>
</span></span><span class=line><span class=cl><span class=c1># Default:</span>
</span></span><span class=line><span class=cl><span class=c1>#  - &#34;med_power_with_dipm max_performance&#34; (AC)</span>
</span></span><span class=line><span class=cl><span class=c1>#  - &#34;med_power_with_dipm min_power&#34; (BAT)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>SATA_LINKPWR_ON_AC</span><span class=o>=</span><span class=s2>&#34;med_power_with_dipm max_performance&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>SATA_LINKPWR_ON_BAT</span><span class=o>=</span><span class=s2>&#34;med_power_with_dipm max_performance&#34;</span>
</span></span></code></pre></td></tr></table></div></div></div><h2 id=4-要不要swap分区><a href=#4-要不要swap分区 class=anchor-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>4. 要不要<code>swap</code>分区</h2><p>我倾向于不要，万一想要<code>swap</code>了完全可以用<code>swapfile</code>的形式随用随开</p><p>Archlinux Wiki的<a href=https://wiki.archlinux.org/index.php/Swap#Swap_file target=_blank rel=noopener>文档真是优秀</a></p><p>摘抄几个命令</p><h4 id=swap-file-creation><a href=#swap-file-creation class=anchor-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Swap file creation</h4><p>For copy-on-write file systems like <a href=https://wiki.archlinux.org/index.php/Btrfs target=_blank rel=noopener>Btrfs</a>, first create a zero length file, set the <code>No_COW</code> attribute on it with <a href=https://wiki.archlinux.org/index.php/Chattr target=_blank rel=noopener>chattr</a>, and make sure compression is disabled:</p><pre tabindex=0><code># truncate -s 0 /swapfile
# chattr +C /swapfile
# btrfs property set /swapfile compression none
</code></pre><p>See <a href=https://wiki.archlinux.org/index.php/Btrfs#Swap_file target=_blank rel=noopener>Btrfs#Swap file</a> for more information.</p><p>Use <code>fallocate</code> to create a swap file the size of your choosing (M = <a href=https://en.wikipedia.org/wiki/Mebibyte target=_blank rel=noopener>Mebibytes</a>, G = <a href=https://en.wikipedia.org/wiki/Gibibyte target=_blank rel=noopener>Gibibytes</a>). For example, creating a 512 MiB swap file:</p><pre tabindex=0><code># fallocate -l 512M /swapfile
</code></pre><p><strong>Note:</strong> <em>fallocate</em> may cause problems with some file systems such as <a href=https://wiki.archlinux.org/index.php/F2FS target=_blank rel=noopener>F2FS</a>.[<a href=https://github.com/karelzak/util-linux/issues/633 target=_blank rel=noopener>1]</a> As an alternative, using <em>dd</em> is more reliable, but slower:</p><pre tabindex=0><code># dd if=/dev/zero of=/swapfile bs=1M count=512 status=progress
</code></pre><p>Set the right permissions (a world-readable swap file is a huge local vulnerability):</p><pre tabindex=0><code># chmod 600 /swapfile
</code></pre><p>After creating the correctly sized file, format it to swap:</p><pre tabindex=0><code># mkswap /swapfile
</code></pre><p>Activate the swap file:</p><pre tabindex=0><code># swapon /swapfile
</code></pre><p>Finally, edit the fstab configuration to add an entry for the swap file:</p><pre tabindex=0><code>/etc/fstab
/swapfile none swap defaults 0 0
</code></pre><p>For additional information, see <a href=https://wiki.archlinux.org/index.php/Fstab#Usage target=_blank rel=noopener>fstab#Usage</a>.</p><p><strong>Note:</strong> The swap file must be specified by its location on the file system not by its UUID or LABEL.</p><h4 id=remove-swap-file><a href=#remove-swap-file class=anchor-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Remove swap file</h4><p>To remove a swap file, it must be turned off first and then can be removed:</p><pre tabindex=0><code># swapoff /swapfile
# rm -f /swapfile
</code></pre><hr><blockquote><p>关于性能也抄几句，我给<code>vm.swappiness</code>配了<code>1</code></p></blockquote><h2 id=performance><a href=#performance class=anchor-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Performance</h2><p>Swap operations are usually significantly slower than directly accessing data in RAM. Disabling swap entirely to improve performance can sometimes lead to a degradation, since it decreases the memory available for VFS caches, causing more frequent and costly disk I/O.</p><p>Swap values can be adjusted to help performance:</p><h3 id=swappiness><a href=#swappiness class=anchor-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Swappiness</h3><p>The <em>swappiness</em> <a href=https://wiki.archlinux.org/index.php/Sysctl target=_blank rel=noopener>sysctl</a> parameter represents the kernel's preference (or avoidance) of swap space. Swappiness can have a value between 0 and 100, the default value is 60. A low value causes the kernel to avoid swapping, a higher value causes the kernel to try to use swap space. Using a low value on sufficient memory is known to improve responsiveness on many systems.</p><p>To check the current swappiness value:</p><pre tabindex=0><code>$ sysctl vm.swappiness
</code></pre><p>Alternatively, the files <code>/sys/fs/cgroup/memory/memory.swappiness</code> or <code>/proc/sys/vm/swappiness</code> can be read in order to obtain the raw integer value.</p><p><strong>Note:</strong> As <code>/proc</code> is a lot less organized and is kept only for compatibility purposes, you are encouraged to use <code>/sys</code> instead.</p><p>To temporarily set the swappiness value:</p><pre tabindex=0><code># sysctl -w vm.swappiness=10
</code></pre><p>To set the swappiness value permanently, create a <a href=https://jlk.fjfi.cvut.cz/arch/manpages/man/sysctl.d.5 target=_blank rel=noopener>sysctl.d(5)</a> configuration file. For example:</p><pre tabindex=0><code>/etc/sysctl.d/99-swappiness.conf
vm.swappiness=10
</code></pre><p>To test and more on why this may work, take a look at <a href=http://rudd-o.com/en/linux-and-free-software/tales-from-responsivenessland-why-linux-feels-slow-and-how-to-fix-that target=_blank rel=noopener>this article</a>.</p><h2 id=5-常用软件><a href=#5-常用软件 class=anchor-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>5. 常用软件</h2><ul><li><del>Google Chrome/Chromium</del>Edge已经堪用, 巨硬威武!!!</li></ul><p>支持的一些启动参数如下所示，我一般用的是<code>--disk-cache-dir=/tmp/chrome_cache --process-per-site</code>，即缓存扔到<code>/tmp</code>分区，每个站点使用一个进程</p><p>对于Chromium，可以在<code>/etc/chromium-browser/default</code>添加自己想要的配置参数，而对于Google Chrome，貌似只能从这里<code>/usr/share/applications/chromium-browser.desktop</code>加</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>--user-data-dir<span class=o>=</span><span class=s2>&#34;[PATH]&#34;</span>  自定义用户数据目录
</span></span><span class=line><span class=cl>--start-maximized                启动就最大化
</span></span><span class=line><span class=cl>--no-sandbox                         取消沙盒模式
</span></span><span class=line><span class=cl>--single-process                    单进程运行
</span></span><span class=line><span class=cl>--process-per-tab                 每个标签使用单独进程
</span></span><span class=line><span class=cl>--process-per-site                每个站点使用单独进程
</span></span><span class=line><span class=cl>--in-process-plugins            插件不启用单独进程
</span></span><span class=line><span class=cl>--disable-popup-blocking 禁用弹出拦截
</span></span><span class=line><span class=cl>--disable-javascript             禁用JavaScript
</span></span><span class=line><span class=cl>--disable-java                         禁用Java
</span></span><span class=line><span class=cl>--disable-plugins                   禁用插件
</span></span><span class=line><span class=cl>--disable-images                   禁用图像
</span></span><span class=line><span class=cl>-incognito                               启动进入隐身模式
</span></span><span class=line><span class=cl>--enable-udd-profiles        启用账户切换菜单
</span></span><span class=line><span class=cl>--proxy-pac-url                   使用pac代理 <span class=o>[</span>via 1/2<span class=o>]</span>
</span></span><span class=line><span class=cl>--lang<span class=o>=</span>zh-CN                        设置语言为简体中文
</span></span><span class=line><span class=cl>--disk-cache-dir<span class=o>=</span><span class=s2>&#34;[PATH]&#34;</span> 自定义缓存目录
</span></span><span class=line><span class=cl>--disk-cache-size<span class=o>=</span>              自定义缓存最大值（单位byte）
</span></span><span class=line><span class=cl>--media-cache-size<span class=o>=</span>         自定义多媒体缓存最大值（单位byte）
</span></span><span class=line><span class=cl>--bookmark-menu              在工具栏增加一个书签按钮
</span></span><span class=line><span class=cl>--enable-sync                       启用书签同步
</span></span></code></pre></td></tr></table></div></div></div><ul><li>Foxit Reader</li></ul><blockquote><p>安装方法见：https://websiteforstudents.com/how-to-install-foxit-reader-on-ubuntu-16-04-17-10-18-04-desktop/</p></blockquote><ul><li>Barrier 在Linux和其他设备之间共享键盘和鼠标</li></ul><blockquote><p>我是从snap安装的，挺方便，务必带好梯子</p></blockquote><blockquote><p><a href=https://snapcraft.io/barrier target=_blank rel=noopener>https://snapcraft.io/barrier</a></p></blockquote><ul><li>FlameShot - 火焰截图</li></ul><blockquote><p>最近发现高分屏上面用他会冻屏，参考这里的解决方法暂时得到解决 <a href=https://github.com/flameshot-org/flameshot/issues/564#issuecomment-750014960 target=_blank rel=noopener>https://github.com/flameshot-org/flameshot/issues/564#issuecomment-750014960</a></p></blockquote><ul><li><p>DeepinTerminal - 深度终端</p></li><li><p>alacritty - 最近在用这个，跟tmux搭配还是蛮舒服</p></li><li><p>CopyQ - 剪贴板增强</p></li><li><p>Qv2ray - 梯子客户端</p></li><li><p>Typora - MarkDown编辑器，配合坚果云同步算是比较非常舒服的个人文档管理方案了</p></li></ul><h2 id=6-snap相关不再推荐装这玩意><a href=#6-snap相关不再推荐装这玩意 class=anchor-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>6. SNAP相关<code>不再推荐装这玩意</code></h2><blockquote><p>via <a href=https://plumz.me/archives/11705/ target=_blank rel=noopener>https://plumz.me/archives/11705/</a></p></blockquote><p>一起来干掉这些傻逼的 Snap，恢复原有的商店。</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=k>for</span> p in <span class=k>$(</span>snap list <span class=p>|</span> awk <span class=s1>&#39;{print $1}&#39;</span><span class=k>)</span><span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>  sudo snap remove <span class=nv>$p</span>
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span></code></pre></td></tr></table></div></div></div><p>删掉所有的已经安装的 Snap 软件。</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>sudo systemctl stop snapd
</span></span><span class=line><span class=cl><span class=k>for</span> m in /snap/core/*<span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>   sudo umount <span class=nv>$m</span>
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span><span class=line><span class=cl>sudo snap remove core
</span></span></code></pre></td></tr></table></div></div></div><p>干掉 Snap 的 Core 文件，很大哟。</p><p><code>sudo apt autoremove --purge snapd</code></p><p>干掉 Snap 的管理工具。</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>rm -rf ~/snap
</span></span><span class=line><span class=cl>sudo rm -rf /snap
</span></span><span class=line><span class=cl>sudo rm -rf /var/snap
</span></span><span class=line><span class=cl>sudo rm -rf /var/lib/snapd
</span></span><span class=line><span class=cl>sudo rm -rf /var/cache/snapd
</span></span></code></pre></td></tr></table></div></div></div><p>干掉 Snap 的目录。</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>sudo bash -c <span class=s2>&#34;cat &gt; /etc/apt/preferences.d/no-snapd.pref&#34;</span> <span class=s>&lt;&lt; EOL
</span></span></span><span class=line><span class=cl><span class=s>Package: snapd
</span></span></span><span class=line><span class=cl><span class=s>Pin: origin &#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s>Pin-Priority: -1
</span></span></span><span class=line><span class=cl><span class=s>EOL</span>
</span></span></code></pre></td></tr></table></div></div></div><p>干掉 Snap 的更新源。</p><hr><blockquote><p>有人号称装完Ubuntu第一时间卸载snap, 但我觉得很香</p></blockquote><ul><li><del>挂梯子</del></li></ul><blockquote><p>新的snap看起来用上了国内CDN，不用挂梯子也可以很舒服了</p></blockquote><ul><li>删除旧的snap包</li></ul><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nv>LANG</span><span class=o>=</span>C snap list --all <span class=p>|</span> awk <span class=s1>&#39;/disabled/{print $1, $(NF-3)}&#39;</span> <span class=p>|</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=nb>read</span> snapname revision<span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>        sudo snap remove <span class=s2>&#34;</span><span class=nv>$snapname</span><span class=s2>&#34;</span> --revision<span class=o>=</span><span class=s2>&#34;</span><span class=nv>$revision</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>done</span>
</span></span></code></pre></td></tr></table></div></div></div><h2 id=7-禁用普通用户锁定登出关机重启><a href=#7-禁用普通用户锁定登出关机重启 class=anchor-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>7. 禁用普通用户锁定/登出/关机/重启</h2><p><a href=https://askubuntu.com/a/1064704 target=_blank rel=noopener>https://askubuntu.com/a/1064704</a></p><h1 id=disable-lock-screen><a href=#disable-lock-screen class=anchor-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Disable Lock Screen</h1><p>You can disable the lock screen permanently when waking from suspend.</p><p>First use this command to discover current settings:</p><pre tabindex=0><code>$ gsettings get org.gnome.desktop.lockdown disable-lock-screen
false
</code></pre><p>Now set it to <code>true</code> using this command:</p><pre tabindex=0><code>gsettings set org.gnome.desktop.lockdown disable-lock-screen &#39;true&#39;
</code></pre><p>If you are unhappy with the new setting you can reverse it using:</p><pre tabindex=0><code>gsettings set org.gnome.desktop.lockdown disable-lock-screen &#39;false&#39;
</code></pre><hr><h1 id=disable-screen-saver-locking><a href=#disable-screen-saver-locking class=anchor-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Disable Screen Saver Locking</h1><p>There was some confusion where people think disabling the Lock screen also disables the screen saver which is invoked after a certain period of inactivity. The screen saver requires input to get your desktop back. Some people may want the screen saver to come on but not have it locked when waking up the screen.</p><p>To check screen saver lock status use:</p><pre tabindex=0><code>$ gsettings get org.gnome.desktop.screensaver lock-enabled
true
</code></pre><p>If true you can turn off screen saver locking with:</p><pre tabindex=0><code>gsettings set org.gnome.desktop.screensaver lock-enabled false
</code></pre><p>To reverse the setting back use:</p><pre tabindex=0><code>gsettings set org.gnome.desktop.screensaver lock-enabled true
</code></pre><hr><p>In Gnome <a href=https://help.gnome.org/users/gnome-power-manager/stable/preferences-advanced.html.en_GB#advanced-preferences-locking target=_blank rel=noopener>screen locking guide</a> it says:</p><blockquote><h2 id=62screen-locking><a href=#62screen-locking class=anchor-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>6.2. Screen Locking</h2><p>By default, GNOME Power Manager supports a simple locking scheme. This means that the screen will lock if set to <strong>Lock screen</strong> in gnome-screensaver when the lid is closed, or the system performs a suspend or hibernate action.</p><p>There is a complex locking scheme available for power users that allows locking policy to change for the lid, suspend and hibernate actions. To enable this complex mode, you will have to disable the GConf key:</p><ul><li><code>/apps/gnome-power-manager/lock/use_screensaver_settings</code></li></ul><p>Then the policy keys can be set to force a <em>gnome-screensaver</em> lock and unlock when the action is performed:</p><ul><li><code>/apps/gnome-power-manager/lock/blank_screen</code></li><li><code>/apps/gnome-power-manager/lock/suspend</code></li><li><code>/apps/gnome-power-manager/lock/hibernate</code></li></ul></blockquote><h2 id=8-文件管理nautilus左侧边栏消失><a href=#8-文件管理nautilus左侧边栏消失 class=anchor-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>8. 文件管理nautilus左侧边栏消失</h2><blockquote><p><a href=https://askubuntu.com/a/766618 target=_blank rel=noopener>https://askubuntu.com/a/766618</a></p></blockquote><p>If you want to come back to default behavior (nautilus with sidebar) you can simply set the previous setting to true:</p><p><code>gsettings set org.gnome.nautilus.window-state start-with-sidebar true</code></p><h2 id=9-this-location-could-not-be-displayedhttpsaskubuntucomquestions858793this-location-could-not-be-displayed-on-ubuntu-16-10><a href=#9-this-location-could-not-be-displayedhttpsaskubuntucomquestions858793this-location-could-not-be-displayed-on-ubuntu-16-10 class=anchor-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>9. <a href=https://askubuntu.com/questions/858793/this-location-could-not-be-displayed-on-ubuntu-16-10 target=_blank rel=noopener>This location could not be displayed</a></h2><p><code>chmod -R 775 /media</code></p><pre tabindex=0><code># NOTE: I am not responsible for any expired content.
create@2020-01-02T11:29:24+08:00
update@2022-11-06T06:45:17+08:00
comment@https://github.com/ferstar/blog/issues/11
</code></pre></div></article><div class=related-posts><h2 class=related-title>相关文章：<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon related-icon"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6.0-12-5.4-12-12v-92h-92c-6.6.0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6.0 12 5.4 12 12v92h92c6.6.0 12 5.4 12 12v56z"/></svg></h2><ul class=related-list><li class=related-item><a href=/post/issue-33/ class=related-link>修复Fcitx输入法文字候选框在PyCharm中无法跟随光标问题</a></li><li class=related-item><a href=/post/issue-32/ class=related-link>Linux系统备份小计</a></li><li class=related-item><a href=/post/issue-30/ class=related-link>记一次公众号后台删库不需跑路的过程</a></li><li class=related-item><a href=/post/issue-27/ class=related-link>miniconda的一个坑</a></li><li class=related-item><a href=/post/issue-25/ class=related-link>Docker 清日志</a></li></ul></div><footer class=minimal-footer><div class=post-tag><a href=/tags/linux/ rel=tag class=post-tag-link>#linux</a></div><div class=post-category><a href=/post/ class="post-category-link active">post</a></div></footer><ul class=post-nav><li class=post-nav-prev><a href=/post/issue-12/ rel=prev>&lt; 利用 GitHub Issues 持续写博灌水</a></li><li class=post-nav-next><a href=/post/issue-10/ rel=next>Git常用操作 ></a></li></ul><div class=load-comments><div id=load-comments>加载评论</div></div><div id=utterances></div></div></main><div id=back-to-top class=back-to-top><a href=#><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon arrow-up"><path d="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6.0-33.9L207 39c9.4-9.4 24.6-9.4 33.9.0l194.3 194.3c9.4 9.4 9.4 24.6.0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3.0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"/></svg></a></div><footer id=footer class=footer><div class=footer-inner><div class=site-info>©&nbsp;2013–2023&nbsp;<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon footer-icon"><path d="M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3.0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"/></svg>&nbsp;ferstar</div><div class=powered-by>Powered by <a href=https://github.com/gohugoio/hugo target=_blank rel=noopener>Hugo</a> | Theme is <a href=https://github.com/reuixiy/hugo-theme-meme target=_blank rel=noopener>MemE</a></div><div class=custom-footer>👀<a href=/>闲谈莫论人非静坐常思己过</a>👀</div></div></footer></div><script>function loadComments(){(function(){const t=document.getElementById("utterances");if(!t)return;const e=document.createElement("script");e.src="https://utteranc.es/client.js",e.async=!0,e.crossOrigin="anonymous",e.setAttribute("repo","ferstar/ferstar.github.io"),e.setAttribute("issue-term","pathname");const n=getCurrentTheme()==="dark";n?e.setAttribute("theme","photon-dark"):e.setAttribute("theme","github-light"),e.setAttribute("label","Comment"),t.appendChild(e)})()}</script><script src=https://cdn.jsdelivr.net/npm/medium-zoom@latest/dist/medium-zoom.min.js></script>
<script>let imgNodes=document.querySelectorAll("div.post-body img");imgNodes=Array.from(imgNodes).filter(e=>e.parentNode.tagName!=="A"),mediumZoom(imgNodes,{background:"hsla(var(--color-bg-h), var(--color-bg-s), var(--color-bg-l), 0.95)"})</script><script src=https://cdn.jsdelivr.net/npm/instant.page@5.1.0/instantpage.min.js type=module defer></script></body></html>